{"version":3,"file":"OsbMangaReader.js","sourceRoot":"","sources":["../src/OsbMangaReader.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnDestroy} from '@angular/core';\nimport { Http, HTTP_PROVIDERS, Headers, RequestOptions } from '@angular/http';\nimport 'Swiper';\nimport 'ScrollMagic';\nimport 'Drift';\ndeclare let ScrollMagic;\ndeclare let Swiper;\ndeclare let Drift;\nlet mangaView, pageScene, pageController, driftInstance;\n\n@Component({\n    selector: 'osb-manga-reader',\n    templateUrl: 'vendor/osb-manga-reader/lib/OsbMangaReader.html',\n    styleUrls: ['vendor/osb-manga-reader/lib/OsbMangaReader.css']\n})\nexport class OsbMangaReader implements OnDestroy {\n    section = '';\n    baseUrl = '';\n    defaultSite = '';\n    apiKey = '';\n    isLoading = true;\n    listStyle = false;\n    hideMenu = false;\n\n    mangaDetails = [];\n    mangaInfo = {};\n    mangaChapter = {};\n\n    siteFavouritesUrl = '';\n    siteFavouritesData = [];\n    siteFavouritesDisplay = [];\n\n    mainListViewData = [];\n    mainListViewDisplay = [];\n    mainListViewDisplayCount = 0;\n    mainListViewDisplayPage = 1;\n    mainListViewDisplayPageLength = 20;\n\n    sliderSettings = {};\n    viewerSettings = {\n        whichManga: {},\n        mangaTitle: '',\n        chapter: 1,\n        chaptersTotal: 0,\n        chapterPagesTotal: 0,\n        isPage: 1,\n        isBookmark: false,\n        hasBookmarks: false,\n        hasNextBookmark: false,\n        hasPrevBookmark: false,\n        nextBookmark: {},\n        prevBookmark: {},\n        usingMagnifier: false\n    };\n    userSettings = {\n        nightMode: false,\n        bookmarks: [],\n        favourites: []\n    };\n\n    constructor(public http: Http) {\n        // Initial Settings\n        this.section = 'site-favourites';\n        // API Settings\n        this.baseUrl = 'https://doodle-manga-scraper.p.mashape.com/';\n        this.apiKey = 'xiQSdA9ACbmshUxnm4ZBC8nn2umSp1LeqQfjsnnVeMWHHSIQy0';\n        this.defaultSite = 'mangareader.net';\n        // App Favourites Settings\n        this.siteFavouritesUrl = 'http://private-e00abd-osbmangareader.apiary-mock.com/topfeed';\n        // Swiper Settings\n        this.sliderSettings = {\n            slidesPerView: 1,\n            keyboardControl: true,\n            preloadImages: false,\n            lazyLoading: true,\n            onInit: this.sliderOnInit.bind(this),\n            onSlideChangeStart: this.slideChangeStarting.bind(this),\n            onSlideChangeEnd: this.slideChanged.bind(this),\n            onReachEnd: this.chapterFinish.bind(this)\n        };\n        console.log(this);\n        this.checkCache();\n\n        var holder = this;\n        window.onbeforeunload = function(e) {\n            holder.destroyEvents();\n        };\n    }\n\n    ngOnDestroy() {\n        this.destroyEvents();\n    }\n\n    destroyEvents() {\n        if (mangaView) {\n            mangaView.destroy();\n        }\n\n        if (pageScene) {\n            pageScene.destroy();\n        }\n\n        if (pageController) {\n            pageController.destroy();\n        }\n\n        if (driftInstance) {\n            driftInstance.destroy();\n        }\n    }\n\n    sliderOnInit(swiper) {\n        var pageObj = {\n            manga: this.viewerSettings.mangaTitle,\n            chapter: this.viewerSettings.chapter,\n            page: this.viewerSettings.isPage\n        };\n        this.viewerSettings.chapterPagesTotal = swiper.slides.length;\n        this.viewerSettings.hasNextBookmark = this.hasMoreBookmarks(pageObj);\n        this.viewerSettings.hasPrevBookmark = this.hasLessBookmarks(pageObj);\n    }\n\n    slideChangeStarting(swiper) {\n        if (driftInstance) {\n            driftInstance.destroy();\n        }\n    }\n\n    slideChanged(swiper) {\n        this.viewerSettings.isPage = swiper.activeIndex + 1;\n        var pageObj = {\n            manga: this.viewerSettings.mangaTitle,\n            chapter: this.viewerSettings.chapter,\n            page: this.viewerSettings.isPage\n        };\n        this.viewerSettings.isBookmark = this.checkBookmark(pageObj);\n        this.viewerSettings.hasNextBookmark = this.hasMoreBookmarks(pageObj);\n        this.viewerSettings.hasPrevBookmark = this.hasLessBookmarks(pageObj);\n        if (this.viewerSettings.usingMagnifier) {\n            this.showMagnifier();\n        }\n    }\n\n    chapterFinish(swiper) {\n        var nextChapter = this.viewerSettings.chapter + 1;\n        this.getMangaChapter(this.viewerSettings.whichManga, nextChapter);\n    }\n\n    checkCache() {\n        var mainListData = localStorage.getItem('osbMangaReader.mainList');\n        if (mainListData) {\n            this.mainListViewData = JSON.parse(mainListData);\n        }\n\n        var siteFavourites = localStorage.getItem('osbMangaReader.siteFavourites');\n        if (siteFavourites) {\n            this.siteFavouritesData = JSON.parse(siteFavourites);\n        }\n\n        var mangaDetails = localStorage.getItem('osbMangaReader.mangaDetails');\n        if (mangaDetails) {\n            this.mangaDetails = JSON.parse(mangaDetails);\n        }\n\n        var userSettings = localStorage.getItem('osbMangaReader.user');\n        if (userSettings) {\n            this.userSettings = JSON.parse(userSettings);\n            if (this.userSettings.nightMode) {\n                this.setNightMode(true);\n            }\n        }\n        this.getSiteFavourites();\n    }\n\n    initSlider() {\n        var holder = this;\n        setTimeout(function(){\n            var viewportSize = window.innerHeight - 20;\n            document.querySelector('.osb-manga-reader-holder .swiper-container').setAttribute('style','height:' + viewportSize + 'px;');\n            mangaView = new Swiper(document.querySelector('.osb-manga-reader-holder .swiper-container'), holder.sliderSettings);\n        }, 500);\n    }\n\n    setNightMode(isNight) {\n        if (isNight) {\n            document.body.classList.add('night-time');\n        } else {\n            document.body.classList.remove('night-time');\n        }\n    }\n\n    toggleNightMode() {\n        this.userSettings.nightMode = !this.userSettings.nightMode;\n        this.setNightMode(this.userSettings.nightMode);\n        localStorage.setItem('osbMangaReader.user', JSON.stringify(this.userSettings));\n    }\n\n    showMagnifier() {\n        this.viewerSettings.usingMagnifier = !this.viewerSettings.usingMagnifier;\n        if (this.viewerSettings.usingMagnifier) {\n            driftInstance = new Drift(document.querySelector('.swiper-slide-active img'), {\n                paneContainer: document.querySelector('#imageMagnifier')\n            });\n        } else if (driftInstance) {\n            driftInstance.destroy();\n        }\n    }\n\n    hasMoreBookmarks(pageObj) {\n        var holder = this, match = false, firstMatch = false;\n        this.userSettings.bookmarks.forEach(function(el) {\n            if (pageObj.manga === el.manga &&\n                pageObj.chapter == el.chapter &&\n                pageObj.page < el.page &&\n                !firstMatch) {\n                firstMatch = true;\n                holder.viewerSettings.nextBookmark = { manga: el.manga, chapter: el.chapter, page: el.page };\n            }\n\n            if (pageObj.manga === el.manga &&\n                pageObj.chapter == el.chapter &&\n                pageObj.page < el.page) {\n                match = true;\n                return false;\n            }\n        });\n        return match;\n    }\n\n    hasLessBookmarks(pageObj) {\n        var holder = this, match = false;\n        this.userSettings.bookmarks.forEach(function(el) {\n            if (pageObj.manga === el.manga &&\n                pageObj.chapter == el.chapter &&\n                pageObj.page > el.page) {\n                holder.viewerSettings.prevBookmark = { manga: el.manga, chapter: el.chapter, page: el.page };\n                match = true;\n                return false;\n            }\n        });\n        return match;\n    }\n\n    goToBookmark(bookmark) {\n        this.viewerSettings.isBookmark  = this.checkBookmark(bookmark);\n        mangaView.slideTo(bookmark.page - 1);\n    }\n\n    hasBookmarks(manga) {\n        var match = false;\n        this.userSettings.bookmarks.forEach(function(el){\n            if (manga === el.manga) {\n                match = true;\n                return false;\n            }\n        });\n        return match;\n    }\n\n    checkBookmark(bookmark) {\n        var jsonMatcher = JSON.stringify(bookmark);\n        var match = false;\n        this.userSettings.bookmarks.forEach(function(el) {\n            if (JSON.stringify(el) === jsonMatcher) {\n                match = true;\n                return false;\n            }\n        });\n        return match;\n    }\n\n    setBookmark(manga, chapter, page) {\n        var bookmark = {\n            manga: manga.href,\n            chapter: chapter,\n            page: page\n        };\n\n        if (this.userSettings.bookmarks.length < 1) {\n            this.userSettings.bookmarks.push(bookmark);\n            localStorage.setItem('osbMangaReader.user', JSON.stringify(this.userSettings));\n            this.viewerSettings.isBookmark = this.checkBookmark(bookmark);\n        } else {\n            if (!this.checkBookmark(bookmark)) {\n                this.userSettings.bookmarks.push(bookmark);\n                localStorage.setItem('osbMangaReader.user', JSON.stringify(this.userSettings));\n                this.viewerSettings.isBookmark = this.checkBookmark(bookmark);\n            }\n        }\n    }\n\n    checkFavourite(manga) {\n        return (this.userSettings.favourites.indexOf(manga) == -1);\n    }\n\n    setFavourite(manga) {\n        if (this.userSettings.favourites.length < 1) {\n            this.userSettings.favourites.push(manga.href);\n            localStorage.setItem('osbMangaReader.user', JSON.stringify(this.userSettings));\n        }\n\n        if (this.checkFavourite(manga.href)) {\n            this.userSettings.favourites.push(manga.href);\n            localStorage.setItem('osbMangaReader.user', JSON.stringify(this.userSettings));\n        }\n    }\n\n    getMangaChapter(manga, chapter) {\n        this.isLoading = true;\n        this.viewerSettings.chapter = chapter;\n        this.viewerSettings.whichManga = manga;\n        this.viewerSettings.mangaTitle = manga.href;\n        this.viewerSettings.chaptersTotal = manga.chapters.length;\n        let headers = new Headers({ 'X-Mashape-Authorization': this.apiKey });\n        let options = new RequestOptions({ headers: headers });\n        this.http.get(this.baseUrl + this.defaultSite  + '/manga/' + manga.href + '/' + chapter, options)\n            .subscribe(response => this.setMangaChapter(response));\n    }\n\n    setMangaChapter(chapter) {\n        this.hideMenu = true;\n        this.viewerSettings.isPage = 1;\n        this.viewerSettings.isBookmark = false;\n        this.viewerSettings.hasBookmarks = this.hasBookmarks(this.viewerSettings.mangaTitle);\n        this.mangaChapter = chapter.json();\n        this.section = 'manga-chapter';\n        this.isLoading = false;\n        this.initSlider();\n    }\n\n    getMainMangaList() {\n        var holder = this;\n        if (this.mainListViewData.length > 1) {\n            var mainViewData = this.mainListViewData.slice(0, 20);\n            mainViewData.forEach(function(element) {\n                holder.getMangaDetails(element, 'main-view', false);\n                setTimeout(function () {\n                    holder.startPagination();\n                }, 2000);\n            });\n            return false;\n        }\n        let headers = new Headers({ 'X-Mashape-Authorization': this.apiKey });\n        let options = new RequestOptions({ headers: headers });\n        this.http.get(this.baseUrl + this.defaultSite, options)\n            .subscribe(response => this.setMainMangaList(response));\n    }\n\n    viewMangaDetails (manga) {\n        this.mangaInfo = manga;\n        this.section = 'manga-info';\n    }\n\n    setMainMangaList(data) {\n        var holder = this;\n        this.mainListViewData = data.json();\n        localStorage.setItem('osbMangaReader.mainList', JSON.stringify(this.mainListViewData));\n\n        var mainViewData = this.mainListViewData.slice(0, 20);\n        mainViewData.forEach(function(element) {\n            holder.getMangaDetails(element, 'main-view', false);\n        });\n\n        setTimeout(function () {\n            holder.startPagination();\n        }, 2000);\n    }\n\n    getMoreMainManga() {\n        var holder = this;\n        var current = holder.mainListViewDisplayPage;\n        holder.mainListViewDisplayPage++;\n        var mainViewData = this.mainListViewData.slice((holder.mainListViewDisplayPageLength * current), (holder.mainListViewDisplayPageLength * holder.mainListViewDisplayPage));\n        mainViewData.forEach(function(element) {\n            holder.getMangaDetails(element, 'main-view', false);\n        });\n\n        setTimeout(function () {\n            var paginationType;\n            if (holder.listStyle) {\n                paginationType = '#paginationLoaderList';\n            } else {\n                paginationType = '#paginationLoader';\n            }\n            document.querySelector(paginationType).classList.remove('active');\n        }, 2000);\n    }\n\n    startPagination() {\n        var holder = this, paginationType = '';\n        pageController = new ScrollMagic.Controller();\n        if (holder.listStyle) {\n            paginationType = '#paginationLoaderList';\n        } else {\n            paginationType = '#paginationLoader';\n        }\n        pageScene = new ScrollMagic.Scene({triggerElement: paginationType, triggerHook: 'onEnter'})\n            .addTo(pageController)\n            .on('enter', function (e) {\n                if (holder.section == 'main-view') {\n                    if (document.querySelector(paginationType).className.indexOf('active') == -1) {\n                        document.querySelector(paginationType).classList.add('active');\n                        holder.getMoreMainManga();\n                    }\n                }\n            });\n        pageScene.update();\n    }\n\n    getMangaDetails(manga, section, cache) {\n        var holder = this;\n        if (this.mangaDetails.length > 1 && cache) {\n            this.mangaDetails.forEach(function(element) {\n                if (manga.title === element.name) {\n                    if (section === 'site-favourites' && holder.siteFavouritesDisplay.indexOf(element) == -1) {\n                        holder.section = 'site-favourites';\n                        holder.siteFavouritesDisplay.push(element);\n                        holder.isLoading = false;\n                    }\n                }\n            });\n            return false;\n        }\n\n        let headers = new Headers({ 'X-Mashape-Authorization': this.apiKey });\n        let options = new RequestOptions({ headers: headers });\n        this.http.get(this.baseUrl + this.defaultSite + '/manga/' + manga.mangaId, options)\n            .subscribe(response => this.setMangaDetails(response, section, cache));\n    }\n\n    setMangaDetails(manga, section, cache) {\n        var data = manga.json();\n        if (cache) {\n            this.mangaDetails.push(data);\n            localStorage.setItem('osbMangaReader.mangaDetails', JSON.stringify(this.mangaDetails));\n        }\n\n        if (section === 'main-view') {\n            this.section = 'main-view';\n            this.mainListViewDisplay.push(data);\n            this.isLoading = false;\n        }\n\n        if (section === 'site-favourites') {\n            this.section = 'site-favourites';\n            this.siteFavouritesDisplay.push(data);\n            this.isLoading = false;\n        }\n    }\n\n    getSiteFavourites() {\n        var holder = this;\n        this.siteFavouritesDisplay = [];\n        if (this.siteFavouritesData.length > 1) {\n            this.siteFavouritesData.forEach(function(element) {\n                holder.getMangaDetails(element, 'site-favourites', true);\n            });\n\n            return false;\n        }\n        this.http.get(this.siteFavouritesUrl)\n            .subscribe(response => this.setSiteFavourites(response));\n    }\n\n    setSiteFavourites(data) {\n        var holder = this;\n        this.siteFavouritesData = data.json();\n        localStorage.setItem('osbMangaReader.siteFavourites', JSON.stringify(this.siteFavouritesData));\n        this.siteFavouritesData.forEach(function(element) {\n            holder.getMangaDetails(element, 'site-favourites', true);\n        });\n    }\n\n}"]}